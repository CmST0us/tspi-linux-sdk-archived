# RV1106 Release Note

## rv1106_hpmcu_wrap_v1.56.bin

| 时间      | 文件                        | 编译 commit                     | 重要程度 |
| --------- | :-------------------------- | ------------------------------- | -------- |
| 2023-05-11 | rv1106_hpmcu_wrap_v1.56.bin | rockit_ko:d1a2dabb#hal:a76806e7 | 重要     |

### New

1. 适配新的卷绕框架。

------

## rv1106_hpmcu_tb_{sc230ai,sc3338,sc4336,dual_sc3338}_v1.65.bin

| 时间       | 文件                                                         | 编译 commit                                    | 重要程度 |
| ---------- | :----------------------------------------------------------- | ---------------------------------------------- | -------- |
| 2023-05-06 | rv1106_hpmcu_tb_{sc230ai,sc3338,sc4336,dual_sc3338}_v1.65.bin | rtt:d2d09ba#hal:d93ef9fd#battery_ipc:0534d87 | 重要     |

### Fixed

| Index | 重要程度 | 更新说明                         | 问题现象                                             | 问题来源 |
| ----- | -------- | -------------------------------- | ---------------------------------------------------- | -------- |
| 1     | 重要     | AIQ 适配v5.0x1.2-rc4  | 解决RTT开机崩溃问题                  | -        |

------

## rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336,dual_sc3338}_v1.64.bin

| 时间       | 文件                                                         | 编译 commit                                    | 重要程度 |
| ---------- | :----------------------------------------------------------- | ---------------------------------------------- | -------- |
| 2023-04-04 | rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336,dual_sc3338}_v1.64.bin | rtt:c6b03745b#hal:d93ef9fd#battery_ipc:12da3e7 | 紧急     |

### Fixed

| Index | 重要程度 | 更新说明                         | 问题现象                                             | 问题来源 |
| ----- | -------- | -------------------------------- | ---------------------------------------------------- | -------- |
| 1     | 紧急     | 解决单摄camera_num未初始化问题。 | camera_num未初始化，清cache数据量异常，RTT耗时变大。 | -        |
| 2     | 重要     | 同步meta头文件。                 | meta分区meta_head结构修改                            | -        |
| 3     | 重要     | 解决副摄mirror flip参数配置问题  | 副摄和主摄使用了同一mirror flip参数                  | -        |

------

## rv1106_hpmcu_tb_gc2093_v1.64.bin

| 时间       | 文件                                                     | 编译 commit                                      | 重要程度 |
| ---------- | :------------------------------------------------------- | ------------------------------------------------ | -------- |
| 2023-03-31 | rv1106_hpmcu_tb_gc2093_v1.64.bin | rtt:bd3010959#hal:e2f3eac3#battery_ipc:61d3fb5 | 重要     |

### New

1. 适配 AIQ V5.0x1.2-rc2。

------

## rv1106_usbplug_v1.07.bin

| 时间       | 文件                                                     | 编译 commit                                      | 重要程度 |
| ---------- | :------------------------------------------------------- | ------------------------------------------------ | -------- |
| 2023-03-16 | rv1106_usbplug_v1.07.bin                                 | I6b73e5e                             | 重要      |

### New

1. 添加新的 spi flash 颗粒支持。

------

## rv1106_ddr_924MHz{_tb}_v1.11.bin

| 时间       | 文件                             | 编译 commit | 重要程度 |
| ---------- | :------------------------------- | ----------- | -------- |
| 2023-03-28 | rv1106_ddr_924MHz{_tb}_v1.11.bin | 285bced5c1  | 重要     |

### Fixed

| Index | 重要程度 | 更新说明                           | 问题现象                  | 问题来源 |
| ----- | -------- | ---------------------------------- | ------------------------- | -------- |
| 1     | 重要     | 修改 QFN 封装的 DDR3L CLK 驱动强度 | 特定场景下 DDR 可能不稳定 | -        |

------

## rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336,dual_sc3338}_v1.63.bin

| 时间       | 文件                                                         | 编译 commit                                    | 重要程度 |
| ---------- | :----------------------------------------------------------- | ---------------------------------------------- | -------- |
| 2023-03-24 | rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336,dual_sc3338}_v1.63.bin | rtt:c6b03745b#hal:d93ef9fd#battery_ipc:f52bf08 | 紧急     |

### New

1. 新增双摄SC3338+SC3338驱动支持。
2. 支持从板级配置中获取DPHY, VICAP, CSI2HOST设备信息。
3. 支持双摄快启。

------

## rv1106_hpmcu_tb_gc2093_v1.63.bin

| 时间       | 文件                                                     | 编译 commit                                      | 重要程度 |
| ---------- | :------------------------------------------------------- | ------------------------------------------------ | -------- |
| 2023-03-07 | rv1106_hpmcu_tb_gc2093_v1.63.bin | rtt:831ea1368#hal:d93ef9fd#battery_ipc:12d4661 | 重要     |

### New

1. gc2093添加1920x1080@25fps 27M mclk。

------

## rv1106_hpmcu_tb_gc2093_v1.62.bin

| 时间       | 文件                                                     | 编译 commit                                      | 重要程度 |
| ---------- | :------------------------------------------------------- | ------------------------------------------------ | -------- |
| 2023-02-16 | rv1106_hpmcu_tb_gc2093_v1.62.bin | rtt:5a5a088d0#hal:d93ef9fd#battery_ipc:12d4661 | 紧急     |

### New

1. fast ae最大默认支持20帧收敛。
2. 添加夜视/补光灯常开模式。
3. 增加对非线性单量程光敏的支持。
4. 添加对软光敏的支持。
5. 支持配置fast ae收敛帧数。

### Fixed

| Index | 重要程度 | 更新说明             | 问题现象                                         | 问题来源 |
| ----- | -------- | -------------------- | ------------------------------------------------ | -------- |
| 1     | 紧急     | 限制camera收敛时间。 | camera 收敛时间长，造成内核ISP驱动快启出流失败。 | -        |
| 2     | 紧急     | 修复重复设置ircut、补光灯问题    | 软光敏下，配置night mode为3/4后，第六帧会重复设置ircut和补光灯。 | -        |
| 3     | 紧急     | 软光敏方案中，规避夜视模式中补光灯还未稳定，fastae就收敛的情况 | 夜视模式中补光灯还未稳定，fastae就收敛，导致曝光异常。 | -        |

------

## rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336}_v1.62.bin

| 时间       | 文件                                                     | 编译 commit                                      | 重要程度 |
| ---------- | :------------------------------------------------------- | ------------------------------------------------ | -------- |
| 2023-02-01 | rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336}_v1.62.bin | rtt:5a5a088d0#hal:d93ef9fd#battery_ipc:12d4661 | 紧急     |

### Fixed

| Index | 重要程度 | 更新说明                                                     | 问题现象                                               | 问题来源 |
| ----- | -------- | ------------------------------------------------------------ | ------------------------------------------------------ | -------- |
| 1     | 紧急     | 软光敏方案中，规避夜视模式中补光灯还未稳定，fastae就收敛的情况 | 夜视模式中补光灯还未稳定，fastae就收敛，导致曝光异常。 | -        |

------

## rv1106_hpmcu_wrap_v1.54.bin

| 时间      | 文件                        | 编译 commit                     | 重要程度 |
| --------- | :-------------------------- | ------------------------------- | -------- |
| 2023-1-15 | rv1106_hpmcu_wrap_v1.54.bin | rockit_ko:69d42563#hal:a76806e7 | 重要     |

### Fixed

| Index | 重要程度 | 更新说明                   | 问题现象                 | 问题来源 |
| ----- | -------- | -------------------------- | ------------------------ | -------- |
| 1     | 重要     | 增加卷绕OVERFLOW的监测条件 | ISP概率性mipi drop frame | -        |

------

## rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336}_v1.61.bin

| 时间       | 文件                                                     | 编译 commit                                      | 重要程度 |
| ---------- | :------------------------------------------------------- | ------------------------------------------------ | -------- |
| 2023-01-05 | rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336}_v1.61.bin | rtt:5a5a088d0#hal:d93ef9fd#battery_ipc:dacbbc1 | 紧急     |

### Fixed

| Index | 重要程度 | 更新说明                         | 问题现象                                                     | 问题来源 |
| ----- | -------- | -------------------------------- | ------------------------------------------------------------ | -------- |
| 1     | 紧急     | 修复gc3003设置flip后图像异常问题 | 设置flip为2、3后，图像bayer格式异常。                        | -        |
| 2     | 紧急     | 修复重复设置ircut、补光灯问题    | 软光敏下，配置night mode为3/4后，第六帧会重复设置ircut和补光灯。 | -        |

------

## rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336}_v1.60.bin

| 时间       | 文件                                                     | 编译 commit                                      | 重要程度 |
| ---------- | :------------------------------------------------------- | ------------------------------------------------ | -------- |
| 2022-12-22 | rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003,sc4336}_v1.60.bin | rtt:755701b24#hal:d93ef9fd#battery_ipc:18df679ea | 紧急     |

### New

1. 新增sc4336支持。
2. fast ae最大默认支持20帧收敛。
3. 添加夜视/补光灯常开模式。
4. 增加对非线性单量程光敏的支持。
5. 添加对软光敏的支持。
6. 支持配置fast ae收敛帧数。

### Fixed

| Index | 重要程度 | 更新说明                 | 问题现象                                  | 问题来源 |
| ----- | -------- | ------------------------ | ----------------------------------------- | -------- |
| 1     | 紧急     | 修复gc3003提前开流问题。 | 提前开流导致后续isp取不到流，影响ae收敛。 | -        |

------

## rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003}_v1.50.bin

| 时间       | 文件                                              | 编译 commit                                 | 重要程度 |
| ---------- | :------------------------------------------------ | ------------------------------------------- | -------- |
| 2022-11-17 | rv1106_hpmcu_tb_{sc230ai,sc3338,gc3003}_v1.50.bin | rtt:a40f17d#hal:b569247#battery_ipc:c62dd55 | 紧急     |

### New

1. sc3338添加1152x648@60fps 27M mclk bining小分辨率配置，默认选择该配置。
2. 新增gc3003 sensor驱动。

### Fixed

| Index | 重要程度 | 更新说明             | 问题现象                                         | 问题来源 |
| ----- | -------- | -------------------- | ------------------------------------------------ | -------- |
| 1     | 紧急     | 限制camera收敛时间。 | camera 收敛时间长，造成内核ISP驱动快启出流失败。 | -        |

------

## rv1106_hpmcu_wrap_v1.53.bin

| 时间       | 文件                        | 编译 commit                     | 重要程度 |
| ---------- | :-------------------------- | ------------------------------- | -------- |
| 2022-11-16 | rv1106_hpmcu_wrap_v1.53.bin | rockit_ko:c9653fe9#hal:a76806e7 | 重要     |

### Fixed

| Index | 重要程度 | 更新说明         | 问题现象                 | 问题来源 |
| ----- | -------- | ---------------- | ------------------------ | -------- |
| 1     | 重要     | 调整QOS策略      | ISP概率性mipi drop frame | -        |
| 2     | 重要     | reboot 时停止mcu | reboot 时概率性卡住      | -        |

------

## rv1106_ddr_924MHz{_tb}_v1.10.bin

| 时间       | 文件                             | 编译 commit | 重要程度 |
| ---------- | :------------------------------- | ----------- | -------- |
| 2022-11-15 | rv1106_ddr_924MHz{_tb}_v1.10.bin | ec2fae0c96  | 重要     |

### Fixed

| Index | 重要程度 | 更新说明                                      | 问题现象                            | 问题来源 |
| ----- | -------- | --------------------------------------------- | ----------------------------------- | -------- |
| 1     | 重要     | 修改 reg_fb1xclk_invdelaysel_dqcmd（除 DDR2） | 特定频率、电压下可能导致 DDR 不稳定 | -        |
| 2     | 普通     | 修改 write trian pattern                      | 提高 write train 准确性             | -        |

------

## rv1106_hpmcu_tb_{sc230ai,sc3338}_v1.40.bin

| 时间      | 文件                                       | 编译 commit                                    | 重要程度 |
| --------- | :----------------------------------------- | ---------------------------------------------- | -------- |
| 2022-11-1 | rv1106_hpmcu_tb_{sc230ai,sc3338}_v1.40.bin | rtt:05d3e965d#hal:b569247c#battery_ipc:bc3785d | 重要     |

### Fixed

| Index | 重要程度 | 更新说明                   | 问题现象               | 问题来源 |
| ----- | -------- | -------------------------- | ---------------------- | -------- |
| 1     | 重要     | 修复3338暗亮度下横条纹问题 | 3338暗亮度下存在横条纹 | -        |

------

## rv1106_hpmcu_tb_gc2093_v1.30.bin

| 时间       | 文件                             | 编译 commit                                                  | 重要程度 |
| ---------- | :------------------------------- | ------------------------------------------------------------ | -------- |
| 2022-10-27 | rv1106_hpmcu_tb_gc2093_v1.30.bin | rtt:2ede82a43#hal:b569247c#battery_ipc:efaec692c#rtt-cherry-pick:8b1555259 | 重要     |

### New

1. 增加gc2093支持。

------

## rv1106_hpmcu_tb_{sc230ai,sc3338}_v1.30.bin

| 时间       | 文件                                       | 编译 commit                                      | 重要程度 |
| ---------- | :----------------------------------------- | ------------------------------------------------ | -------- |
| 2022-10-20 | rv1106_hpmcu_tb_{sc230ai,sc3338}_v1.30.bin | rtt:2ede82a43#hal:b569247c#battery_ipc:efaec692c | 重要     |

### New

1. 添加对LTR308数字光敏的支持。
2. 添加对hdr的支持。

### Fixed

| Index | 重要程度 | 更新说明                  | 问题现象                                                     | 问题来源 |
| ----- | -------- | ------------------------- | ------------------------------------------------------------ | -------- |
| 1     | 重要     | 修复0地址被冲问题         | spi nor flash 使用1线模式情况下，spl数据被冲，造成无法启动spl。 | -        |
| 2     | 重要     | 修复共享内存cache操作方式 | ARM核无法及时获取到共享内存数据。                            | -        |

------

## rv1106_hpmcu_wrap_v1.50.bin

| 时间       | 文件                        | 编译 commit                     | 重要程度 |
| ---------- | :-------------------------- | ------------------------------- | -------- |
| 2022-09-29 | rv1106_hpmcu_wrap_v1.50.bin | rockit_ko:576377cb#hal:a76806e7 | 紧急     |

### Fixed

| Index | 重要程度 | 更新说明                    | 问题现象                                                     | 问题来源 |
| ----- | -------- | --------------------------- | ------------------------------------------------------------ | -------- |
| 1     | 普通     | 优化代码逻辑                 | 减少代码量，增加打印信息 | -        |
| 2     | 重要     | 提高编码器的QOS=0X505        | 减少部分场景OVERFLOW               | -        |
| 3     | 紧急     | 开机无效CACHE                | 直接运行代码导致因为脏CACHE冲LINUX内存 | -        |

------

## rv1106_hpmcu_wrap_v1.46.bin

| 时间       | 文件                        | 编译 commit                     | 重要程度 |
| ---------- | :-------------------------- | ------------------------------- | -------- |
| 2022-09-08 | rv1106_hpmcu_wrap_v1.46.bin | rockit_ko:7e8fe8af#hal:a76806e7 | 重要     |

### Fixed

| Index | 重要程度 | 更新说明                    | 问题现象                                                     | 问题来源 |
| ----- | -------- | --------------------------- | ------------------------------------------------------------ | -------- |
| 1     | 重要     | 修复1.40引入的BUG           | 当编码器启动双码流后，MCU概率性无法判断卷绕帧结束，主码流卡死 | -        |
| 2     | 重要     | 修复加载MCU固件引起的冲内存 | 在加载MCU固件之前直接RESET RISCV会导致冲内存。               | -        |
| 3     | 重要     | OVERFLOW无法丢帧            | 如果编码器启动太慢，MCU报OVERFLOW，但编码器无法丢帧引起超时复位。 | -        |

------

## rv1106_hpmcu_tb_{sc230ai,sc3338}_v1.20.bin

| 时间       | 文件                              | 编译 commit     | 重要程度 |
| ---------- | :-------------------------------- | ---------- | -------- |
| 2022-09-03 | rv1106_hpmcu_tb_{sc230ai,sc3338}_v1.20.bin | rtt:efa791c#hal:b569247#battery_ipc:d5fb92e | 紧急   |

### New

1. 支持快启第一帧aiq全参流程。
2. 支持rtt阶段从meta分区设置帧率分辨率。
3. 支持同步meta头文件。
4. fast ae 效果优化，曝光分解与AIQ完全一致，支持db 增益synsensor,支持check 曝光寄存器。
5. 全参并行方案开启AE统计。
6. meta地址可以用menuconfig配置。

### Fixed

| Index | 重要程度 | 更新说明                                                     | 问题现象                                         | 问题来源 |
| ----- | -------- | ------------------------------------------------------------ | ------------------------------------------------ | -------- |
| 1     | 重要     | 解决thread:tidle stack overflow的问题                        | 概率出现thread:tidle stack overflow，rtt异常退出 | -        |
| 2     | 重要     | 从iq bin中读取ae标定参数                                     | ae标定数据 不生效                                | -        |
| 3     | 重要     | 解决暗环境AIQ启动后去噪锐化效果变化及亮度变暗的问题          | 暗环境下内核阶段和aiq不平滑的衔接                | -        |
| 4     | 紧急     | 解决全参图像效果问题，需要与AIQ提交0ed3f415d3相匹配，否则图像会变绿 | 全参图像效果异常                                 | -        |

